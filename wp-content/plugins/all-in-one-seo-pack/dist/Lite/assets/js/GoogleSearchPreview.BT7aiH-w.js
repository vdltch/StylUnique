import{u as v,m as R,n as T,o as k,t as x}from"./links.w575jfOL.js";import{C as $}from"./constants.Ct0G2N2t.js";import{a as N}from"./Caret.B8YmKvEY.js";import{D as q,v as V,o as r,c as o,a as s,t as a,x as C,F as h,J as g,b as _,C as H,G as M,K as j,L as A}from"./runtime-dom.esm-bundler.CWn9hmRK.js";import{_ as B}from"./_plugin-vue_export-helper.BN1snXvA.js";const d={components:{SvgCaret:N},computed:{faq(){var t;const e=((t=this.richResults)==null?void 0:t.faq)||[];return Array.isArray(e)&&e.length?e:[]},reviewSnippet(){var n;const t={...{bestRating:null,ratingValue:null,reviewCount:null,ratingCount:null,priceCurrency:null,price:null,priceFrom:null,priceTo:null,prosConsNotes:[]},...((n=this.richResults)==null?void 0:n.reviewSnippet)||{}};if(Object.values(t).every(c=>c===null)||!t.reviewCount&&!t.ratingCount)return{};for(const[c,l]of Object.entries(t))if(["bestRating","ratingValue"].includes(c)&&(5<l||l===null))return{};return t.price=isNaN(parseFloat(t.price))?null:parseFloat(t.price).toFixed(2),t.priceFrom=isNaN(parseFloat(t.priceFrom))?null:parseFloat(t.priceFrom).toFixed(2),t.priceTo=isNaN(parseFloat(t.priceTo))?null:parseFloat(t.priceTo).toFixed(2),t},yellowStarsWidth(){return`${this.reviewSnippet.ratingValue*100/5}%`},urlBreadcrumbs(){try{const e=new URL(this.url);let t=e.hostname+e.pathname.replace(/\/$/,"");return t=t.substring(0,50).trim()+(50<t.length?"...":""),`${e.protocol}//`+t.replaceAll("/"," &rsaquo; ")}catch{return""}},parseFavicon(){var n;const e=v();let t=`https://www.google.com/s2/favicons?sz=64&domain=${e.aioseo.urls.domain}`;try{t=new URL(this.favicon||"").href}catch{(n=e.aioseo.data)!=null&&n.isDev&&(t=`${e.aioseo.urls.home}/favicon.ico`)}return t},parseDescription(){let e=R(this.description.substring(0,160).trim()+(160<this.description.length?" ...":""),!1);if(e=T(e),!this.focusKeyphrase)return e;const t=this.focusKeyphrase.split(" "),n=new RegExp("\\b"+t.join("\\b|\\b")+"\\b","gi");return e.replace(n,"<strong>$&</strong>")}},methods:{stripTags:k,getReviewSnippetPriceLabel(){if(parseFloat(this.reviewSnippet.price)===0&&!this.reviewSnippet.priceTo)return this.strings.free;if(this.reviewSnippet.priceCurrency){const e=$.find(t=>t.value===this.reviewSnippet.priceCurrency)||{};return this.reviewSnippet.priceFrom&&this.reviewSnippet.priceTo?`${e==null?void 0:e.symbol}${this.reviewSnippet.priceFrom} - ${e==null?void 0:e.symbol}${this.reviewSnippet.priceTo}`:`${e==null?void 0:e.symbol}${this.reviewSnippet.price}`}return`$${this.reviewSnippet.price}`},getReviewSnippetCountLabel(){if(this.device==="desktop"){const e=this.reviewSnippet.ratingCount||this.reviewSnippet.reviewCount,t=this.reviewSnippet.ratingCount?this.$t._n("vote","votes",e,this.$td):this.$t._n("review","reviews",e,this.$td);return this.$t.sprintf(this.$t.__("%1$s %2$s",this.$td),e,t)}return`(${this.reviewSnippet.ratingCount||this.reviewSnippet.reviewCount})`},truncate:x},props:{focusKeyphrase:String,device:{type:String,default:"desktop"},favicon:String,hostname:{type:String,default(){const e=v();return e.aioseo.data.siteName||e.aioseo.urls.domain}},url:{type:String,default(){return v().aioseo.urls.home}},title:String,description:String,richResults:Object},data(){return{strings:{free:this.$t.__("Free",this.$td),rating:this.$t.__("Rating",this.$td),prosCons:this.$t.__("Pros and cons include",this.$td),viewFullList:this.$t.__("View full list",this.$td)}}}},b=()=>{q(e=>({"4ed964c0":e.yellowStarsWidth}))},F=d.setup;d.setup=F?(e,t)=>(b(),F(e,t)):b;const w=e=>(j("data-v-7f2f66d2"),e=e(),A(),e),D={class:"aioseo-google-search-preview__main"},I={class:"aioseo-google-search-preview__favicon"},O={class:"favicon-wrapper"},P=["src"],U={class:"aioseo-google-search-preview__location"},z={class:"hostname text-truncate"},K=["innerHTML"],E={class:"aioseo-google-search-preview__title"},G=["innerHTML"],W={key:0,class:"aioseo-google-search-preview__pros-cons"},J={class:"aioseo-google-search-preview__pros-cons__description"},Y=w(()=>s("span",null," ",-1)),Q=w(()=>s("span",{class:"bullet"},null,-1)),X={class:"aioseo-google-search-preview__pros-cons__view-full-list"},Z={key:1,class:"aioseo-google-search-preview__review-snippet"},ee=w(()=>s("div",{class:"aioseo-google-search-preview__review-snippet__stars"},[s("div")],-1)),te={class:"aioseo-google-search-preview__review-snippet__rating"},se={class:"aioseo-google-search-preview__review-snippet__count bullet"},ie={key:0,class:"aioseo-google-search-preview__review-snippet__price bullet"},re={key:2,class:"aioseo-google-search-preview__anchor"},oe={class:"aioseo-google-search-preview__anchor__link"},ne={key:0,class:"aioseo-google-search-preview__anchor__bullet"},ae={key:3,class:"aioseo-google-search-preview__faq"},ce={class:"aioseo-google-search-preview__faq__question",role:"button"},le=["innerHTML"],pe=["innerHTML"];function ue(e,t,n,c,l,i){var f,m,S,y;const L=V("svg-caret");return r(),o("div",{class:M(["aioseo-google-search-preview",`aioseo-google-search-preview--${n.device}`])},[s("div",D,[s("div",I,[s("div",O,[s("img",{src:i.parseFavicon,alt:"Favicon",loading:"lazy",decoding:"async",height:"18",width:"18"},null,8,P)])]),s("div",U,[s("div",z,a(n.hostname.replace(/^(m|www)\./,"")),1),s("div",{class:"url text-truncate",innerHTML:i.urlBreadcrumbs},null,8,K)]),s("div",E,a(n.title.substring(0,70).trim()+(n.title.length>70?" ...":"")),1),s("div",{class:"aioseo-google-search-preview__description",innerHTML:i.parseDescription},null,8,G)]),(f=i.reviewSnippet.prosConsNotes||[])!=null&&f.length?(r(),o("div",W,[C(a(l.strings.prosCons)+": ",1),(r(!0),o(h,null,g(i.reviewSnippet.prosConsNotes.slice(0,10),(p,u)=>(r(),o(h,{key:`pros-cons-${u}`},[s("span",J,a(p),1),Y,Q],64))),128)),s("span",X,a(l.strings.viewFullList),1)])):_("",!0),Object.values(i.reviewSnippet).length?(r(),o("div",Z,[ee,s("div",te,[s("span",null,a(l.strings.rating)+":",1),C(" "+a(parseFloat(i.reviewSnippet.ratingValue).toFixed(2)),1)]),s("div",se,a(i.getReviewSnippetCountLabel()),1),((m=i.reviewSnippet)==null?void 0:m.price)!==null?(r(),o("div",ie,a(i.getReviewSnippetPriceLabel()),1)):_("",!0)])):_("",!0),(y=(S=this.richResults)==null?void 0:S.anchorLinks)!=null&&y.length?(r(),o("div",re,[(r(!0),o(h,null,g(this.richResults.anchorLinks,(p,u)=>(r(),o(h,{key:`anchor-${u}`},[s("span",oe,a(i.truncate(p,30)),1),u!==this.richResults.anchorLinks.length-1?(r(),o("span",ne," • ")):_("",!0)],64))),128))])):_("",!0),Object.values(i.faq).length?(r(),o("div",ae,[(r(!0),o(h,null,g(i.faq.slice(0,3),(p,u)=>(r(),o("details",{key:`faq-${u}`,class:"aioseo-google-search-preview__faq__container"},[s("summary",ce,[s("span",{class:"text-truncate",innerHTML:i.truncate(i.stripTags(p.question),60)},null,8,le),H(L,{width:"20"})]),s("span",{class:"aioseo-google-search-preview__faq__answer",innerHTML:i.stripTags(p.answer)},null,8,pe)]))),128))])):_("",!0)],2)}const we=B(d,[["render",ue],["__scopeId","data-v-7f2f66d2"]]);export{we as C};
